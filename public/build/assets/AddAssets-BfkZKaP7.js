import{r as u,j as e,H as h}from"./app-BspA4g8O.js";import{D as j}from"./DashboardLayout-DSQZtgc_.js";function N(){const[t,r]=u.useState({tin:"",location:"",asset_type:"",asset_value:"",date_acquired:"",description:""}),[s,n]=u.useState({}),[a,b]=u.useState(!1),[x,l]=u.useState({type:"",text:""}),o=c=>{r({...t,[c.target.name]:c.target.value})},g=async c=>{c.preventDefault(),n({}),l({type:"",text:""});const p={};if(Object.entries(t).forEach(([i,d])=>{d||(p[i]="This field is required")}),Object.keys(p).length>0){n(p);return}b(!0);try{const i=await fetch("/api/jtb/submit-asset",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)}),d=await i.json();i.ok&&d.ResponseCode==="001"?(l({type:"success",text:d.ResponseDescription||"Asset added successfully!"}),r({tin:"",location:"",asset_type:"",asset_value:"",date_acquired:"",description:""})):l({type:"error",text:d.ResponseDescription||"Something went wrong."})}catch(i){console.error("Error:",i),l({type:"error",text:"Network error. Please try again."})}finally{b(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(h,{title:"Add Asset Record"}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-green-800",children:"Add Asset Record"}),e.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-800 transition",children:"Back to Dashboard"})]}),x.text&&e.jsx("div",{className:`mb-4 p-4 rounded ${x.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-700"}`,children:x.text}),e.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-white p-6 rounded-lg shadow",children:[e.jsx(m,{label:"TIN *",name:"tin",value:t.tin,onChange:o,error:s.tin}),e.jsx(m,{label:"Location *",name:"location",value:t.location,onChange:o,error:s.location}),e.jsx(m,{label:"Asset Type *",name:"asset_type",value:t.asset_type,onChange:o,error:s.asset_type}),e.jsx(m,{label:"Asset Value *",name:"asset_value",value:t.asset_value,onChange:o,error:s.asset_value}),e.jsx(y,{label:"Date Acquired *",name:"date_acquired",value:t.date_acquired,onChange:o,error:s.date_acquired}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("textarea",{name:"description",value:t.description,onChange:o,className:"w-full border border-gray-300 p-2 rounded",rows:3}),s.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.description})]}),e.jsx("div",{className:"md:col-span-2 flex justify-end",children:e.jsx("button",{type:"submit",disabled:a,className:`px-6 py-2 rounded text-white transition ${a?"bg-gray-400":"bg-green-700 hover:bg-green-800"}`,children:a?"Submitting...":"Submit Asset Record"})})]})]})]})}function m({label:t,name:r,value:s,onChange:n,error:a}){return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),e.jsx("input",{type:"text",name:r,value:s,onChange:n,className:"w-full border border-gray-300 p-2 rounded"}),a&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]})}function y({label:t,name:r,value:s,onChange:n,error:a}){return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),e.jsx("input",{type:"date",name:r,value:s,onChange:n,className:"w-full border border-gray-300 p-2 rounded"}),a&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]})}export{N as default};
